
var GIAPI={demo:{medsuv:"http://med-suv-demo.essi-lab.eu/dab/",nextData:"http://130.186.17.169/next-data-dab/",api:"http://api.eurogeoss-broker.eu/dab/",prod:"http://production.geodab.eu/gi-cat-StP/",preProd:"http://preproduction.geodab.eu/gi-cat-StP/",local:"http://localhost:8085/gi-cat/",hermes:"http://hermes.essi-lab.eu/dab/"},logger:{enabled:!1,info:{stringify:function(){return JSON.stringify(this,null,4)}},warn:{stringify:function(){return JSON.stringify(this,null,4)}},error:{stringify:function(){return JSON.stringify(this,null,4)}},log:function(t,e){if(GIAPI.logger.enabled)switch(e||(e="info"),e){case"info":GIAPI.logger.info[GIAPI.isoDateTime()]=t;break;case"warn":GIAPI.logger.warn[GIAPI.isoDateTime()]=t;break;case"error":GIAPI.logger.error[GIAPI.isoDateTime()]=t;break;default:return}}},random:function(){return Math.random().toString(36).slice(2)},query:function(t,e,r,i,n,a,o){var s=r?r.start||1:1,u=r?r.pageSize||10:10,c=e?e.where||"":"";c&&(c=c.west+","+c.south+","+c.east+","+c.north);var m=e?e.when||"":"",l=m&&m.from?m.from:"",p=m&&m.to?m.to:"";l&&(l=-1===l.indexOf("T")?l+"T00:00:00Z":l),p&&(p=-1===p.indexOf("T")?p+"T00:00:00Z":p);var d=e?e.what||"":"",h=r&&r.searchOperator?" "+r.searchOperator+" ":" OR ",f="";if(Array.prototype.isArray(d)){for(var y=0;y<d.length;y++)f+=d[y]+h;f=f.substring(0,f.length-4)}else f=d;var g=GIAPI.readConstraint(e,"keyword"),v=GIAPI.readConstraint(e,"format"),I=GIAPI.readConstraint(e,"protocol"),T=e?e.who||"":"",A=t.endsWith("/")?"":"/";o||(o=GIAPI.random());var b=n?n:"",S="",M="";if(r&&r.extension)if(M="string"==typeof r.extension.relation?r.extension.relation:r.extension.relation.value,r.extension.concepts){f="";var P=r.extension.concepts;if("string"==typeof P)S=P;else{for(var y=0;y<P.length;y++){var D=P[y],w=D.uri();S+=w+","}S=S.substring(0,S.length-1)}}else f=r.extension.keyword;var x=r?r.searchFields||"":"",F="";if(f&&x)if(Array.prototype.isArray(x)){for(var y=0;y<x.length;y++)F+=x[y]+",";F=F.substring(0,F.length-4)}else F=x;var G="";r&&r.spatialRelation&&(G=r.spatialRelation);var N="";r&&r.termFrequency&&(r.termFrequency=r.termFrequency.replace("source","providerID"),N=r.termFrequency);var O=null;O=r&&r.aggregate?"opensearch?reqID="+o+"&aggregate=true&":S||M?"opensearchsemanticenhanced?reqID="+o+"&semExec=expand&":"opensearch?reqID="+o+"&";var C=t+A+"services/"+O;return C+="si="+s+"&",C+="ct="+u+"&",C+="st="+f+"&",C+="kwd="+g+"&",C+="frmt="+v+"&",C+="prot="+I+"&",C+="searchFields="+F+"&",C+="bbox="+c+"&",C+="rel="+G+"&",C+="tf="+N+"&",C+="ts="+l+"&",C+="te="+p+"&",C+="targetId="+b+"&",a&&(C+="sources="+a+"&"),(i||T)&&(C+="parents="+(i?i:T)+"&"),C+="subj="+encodeURIComponent(S)+"&rela="+M+"&outputFormat=application/json",GIAPI.logger.log("query: "+C),C},status:function(t,e,r){var i=t.endsWith("/")?"":"/",n=e?"&semantic=true":"",a=GIAPI.lbStatusProxyEndpoint?GIAPI.lbStatusProxyEndpoint:t+i+"services/status?";return a+"id="+r+"&format=application/json"+n},concept:function(t,e,r,i,n){var a=t.endsWith("/")?"":"/",o=GIAPI.random(),s="";if(!e)if(e="",i){for(var u=[],c=0;c<i.length;c++){var m=i[c];"string"==typeof m?u.push(m):u.push(m.value)}s=u}else{var l="";for(name in GIAPI.Relation)"NONE"!==name&&"decode"!==name&&(l+=GIAPI.Relation[name].value+",");s=l.substring(0,l.length-1)}var p=n&&n.start?n.start:1,d=n&&n.count?n.count:10,h=n&&n.topLevel?n.topLevel:"false";r=encodeURIComponent(r);var f=t+a+"services/opensearchsemanticenhanced?semExec=suggestion&si="+p+"&ct="+d+"&reqID="+o+"&st="+e+"&topLevel="+h+"&subj="+r+"&rela="+s+"&outputFormat=application/json";return GIAPI.logger.log("concept: "+f),f},accessOptions:function(t,e,r,i){var n=e.url;n=n.substring(0,n.indexOf("?")),n=n.replace("transformer","http-get");var a="gi-axe-capabilities"===r?"&jsondataoutput=true":"";n+="?service=WPS&request=Execute&identifier="+r+a,n+="&name="+encodeURIComponent(e.name);var o=GIAPI.readParam(e.url,"protocol");o=encodeURIComponent(o),n+="&protocol="+o;var s=GIAPI.readParam(e.url,"linkage");s=encodeURIComponent(s),n+="&linkage="+s,n+="&DataInputs=descriptor=";var u=t;u=u.endsWith("/")?u:u+"/",u+="services/cswiso?request=GetRecordById&version=2.0.2&service=CSW&ElementSetName=full&outputSchema=http://www.isotc211.org/2005/gmi&id=",u+=i,u=encodeURIComponent(u);var c=n+u;return c},accessLink:function(t,e,r,i,n){e=e.substring(0,e.indexOf("?")),e=e.replace("transformer","http-get");var a="gi-axe-capabilities"===i?"&jsondataoutput=true":"";e+="?service=WPS&request=Execute&identifier="+i+a,e+="&name="+r.name,e+="&protocol="+r.protocol,e+="&linkage="+r.linkage,e+="&DataInputs=descriptor=";var o=t;o=o.endsWith("/")?o:o+"/",o+="services/cswiso?request=GetRecordById&version=2.0.2&service=CSW&ElementSetName=full&outputSchema=http://www.isotc211.org/2005/gmi&id=",o+=n,o=encodeURIComponent(o);var s="";if(o+=";",r.crs&&(s+="outputCRS="+r.crs+";"),r.vectorFormat&&(s+="outputVectorFormat="+r.vectorFormat+";"),r.rasterFormat&&(s+="outputRasterFormat="+r.rasterFormat+";"),r.spatialSubset){var u=r.spatialSubset;s+="outputSubset="+u.west+","+u.south+","+u.east+","+u.north+";"}if(r.temporalSubset){var c=r.temporalSubset;s+="outputTemporalBegin="+c.from+";outputTemporalEnd="+c.to+";"}if(r.resolution){var m=r.resolution;s+="outputResolution="+m.latResolution+","+m.lonResolution}s=encodeURIComponent(s),s+="&RawDataOutput=resource";var l=e+o+s;return l},readConstraint:function(t,e){var r=t?t[e]||"":"",i="";if(Array.prototype.isArray(r)){for(var n=0;n<r.length;n++)i+=r[n]+" AND ";i=i.substring(0,i.length-5)}else i=r;return i},emptyResultSet:function(t){var e={};return e.size=0,e.pageSize=0,e.start=0,e.pageIndex=0,e.pageCount=0,t&&(e.error=t),e},clone:function(t){return jQuery.extend(!0,{},t)},isoDateTime:function(){return(new Date).format("isoDateTimeMls")},readParam:function(t,e){var r=t.split(e+"=")[1];return r.indexOf("&")>-1&&(r=r.substring(0,r.indexOf("&"))),r}};"function"!=typeof Array.prototype.isArray&&(Array.prototype.isArray=function(t){return"[object Array]"===Object.prototype.toString.apply(t)}),"function"!=typeof Array.prototype.remove&&(Array.prototype.remove=function(t,e){for(var r in t)if(t[r]===e){t.splice(r,1);break}}),"function"!=typeof Array.prototype.distinctValues&&(Array.prototype.distinctValues=function(t){return function(){return this.filter(t)}}(function(t,e,r){return r.indexOf(t,e+1)<0})),"function"!=typeof String.prototype.endsWith&&(String.prototype.endsWith=function(t){return-1!==this.indexOf(t,this.length-t.length)}),function($){$.timer=function(func,time,autostart){return this.set=function(func,time,autostart){if(this.init=!0,"object"==typeof func){var paramList=["autostart","time"];for(var arg in paramList)void 0!=func[paramList[arg]]&&eval(paramList[arg]+" = func[paramList[arg]]");func=func.action}return"function"==typeof func&&(this.action=func),isNaN(time)||(this.intervalTime=time),autostart&&!this.isActive&&(this.isActive=!0,this.setTimer()),this},this.once=function(t){var e=this;return isNaN(t)&&(t=0),window.setTimeout(function(){e.action()},t),this},this.play=function(t){return this.isActive||(t?this.setTimer():this.setTimer(this.remaining),this.isActive=!0),this},this.pause=function(){return this.isActive&&(this.isActive=!1,this.remaining-=new Date-this.last,this.clearTimer()),this},this.stop=function(){return this.isActive=!1,this.remaining=this.intervalTime,this.clearTimer(),this},this.toggle=function(t){return this.isActive?this.pause():t?this.play(!0):this.play(),this},this.reset=function(){return this.isActive=!1,this.play(!0),this},this.clearTimer=function(){window.clearTimeout(this.timeoutObject)},this.setTimer=function(t){var e=this;"function"==typeof this.action&&(isNaN(t)&&(t=this.intervalTime),this.remaining=t,this.last=new Date,this.clearTimer(),this.timeoutObject=window.setTimeout(function(){e.go()},t))},this.go=function(){this.isActive&&(this.action(),this.setTimer())},this.init?new $.timer(func,time,autostart):(this.set(func,time,autostart),this)}}(jQuery),dateFormat=function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,i=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t};return function(n,a,o){var s=dateFormat;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(n)||/\d/.test(n)||(a=n,n=void 0),n=n?new Date(n):new Date,isNaN(n))throw SyntaxError("invalid date");a=String(s.masks[a]||a||s.masks["default"]),"UTC:"==a.slice(0,4)&&(a=a.slice(4),o=!0);var u=o?"getUTC":"get",c=n[u+"Date"](),m=n[u+"Day"](),l=n[u+"Month"](),p=n[u+"FullYear"](),d=n[u+"Hours"](),h=n[u+"Minutes"](),f=n[u+"Seconds"](),y=n[u+"Milliseconds"](),g=o?0:n.getTimezoneOffset(),v={d:c,dd:i(c),ddd:s.i18n.dayNames[m],dddd:s.i18n.dayNames[m+7],m:l+1,mm:i(l+1),mmm:s.i18n.monthNames[l],mmmm:s.i18n.monthNames[l+12],yy:String(p).slice(2),yyyy:p,h:d%12||12,hh:i(d%12||12),H:d,HH:i(d),M:h,MM:i(h),s:f,ss:i(f),l:i(y,3),L:i(y>99?Math.round(y/10):y),t:12>d?"a":"p",tt:12>d?"am":"pm",T:12>d?"A":"P",TT:12>d?"AM":"PM",Z:o?"UTC":(String(n).match(e)||[""]).pop().replace(r,""),o:(g>0?"-":"+")+i(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]};return a.replace(t,function(t){return t in v?v[t]:t.slice(1,t.length-1)})}}(),dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoDateTimeMls:"yyyy-mm-dd'T'HH:MM:ss.l",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]},"function"!=typeof Date.prototype.format&&(Date.prototype.format=function(t,e){return dateFormat(this,t,e)});
GIAPI.GINode=function(){var e,r,a=48,o=96,n=144,t=288,i=GIAPI.random(),s={},l=arguments[0],p=arguments[1];l?(l.topic&&(l.topic=l.topic.distinctValues()),l.geossCategory&&(l.geossCategory=l.geossCategory.distinctValues()),l.keyword&&(l.keyword=l.keyword.distinctValues())):l={id:""+i,type:"simple",title:"Simple node "+i},s._parent=null,s._id=l.id,s._title=l.title,s.expand=function(a,o){if("simple"===l.type)a.apply(s,[GIAPI.Page([])],GIAPI.emptyResultSet());else{var n=1;4===arguments.length?n=arguments[3]:e=null;var t={};t.start=n,t.pageSize=o;var i=GIAPI.query(u(),null,t,l.id,null);r=a,jQuery.ajax({type:"GET",url:i,crossDomain:!0,dataType:"jsonp",success:function(r){if(e=r.resultSet,e.error)return GIAPI.logger.log("expand error: "+e.error,"error"),a.apply(p,[GIAPI.Page(),e]),void 0;for(var o=[],n=0;n<r.reports.length;n++){var t,i=r.reports[n];t=i.service&&i.service.dabSource===!0?GIAPI.DABSource(i,s):GIAPI.GINode(i,p),t._parent=s,o.push(t)}a.apply(s,[GIAPI.Page(o),e])},complete:function(e,r){GIAPI.logger.log("expand complete status: "+r)},error:function(e,r,o){r+=o.message?", exception -> "+o.message:"",GIAPI.logger.log("expand error: "+r,"error"),a.apply(s,[GIAPI.Page([]),GIAPI.emptyResultSet("Error occurred: "+r)])}})}},s.expandNext=function(a,o){if("simple"===l.type)return!1;if(!e)throw"node not expanded";var n=e.size,t=e.start,i=e.pageSize;if(t+i>n)return!1;if(o){s.expand(r,null,i,t+i)}return!0},s.accessOptions=function(e,r){{var a=c();arguments[1]}if(a.length>0)for(var o=[],n=0;n<a.length;n++){var t=a[n],i=GIAPI.accessOptions(u(),t,"gi-axe-capabilities",l.id);try{jQuery.ajax({type:"GET",url:i,crossDomain:!0,dataType:"jsonp",success:function(n){if(s.count?s.count++:s.count=1,n.error)return GIAPI.logger.log("accessoptions error: "+n.error,"error"),e.apply(s,[null,"Unable to retrieve access options: "+n.error]),void 0;n.defaultOptions.name=GIAPI.readParam(this.url,"name"),n.defaultOptions.protocol=GIAPI.readParam(this.url,"protocol"),n.defaultOptions.linkage=GIAPI.readParam(this.url,"linkage");for(var t=0;t<n.validOptions.length;t++)n.validOptions[t].name=GIAPI.readParam(this.url,"name"),n.validOptions[t].protocol=GIAPI.readParam(this.url,"protocol"),n.validOptions[t].linkage=GIAPI.readParam(this.url,"linkage");o.push(n),s.count===(r?a.length:1)&&(s.count=null,e.apply(s,r?[o]:[o[0]]),GIAPI.logger.log("- Options -"),GIAPI.logger.log(o))},complete:function(){},error:function(e,r,a){r+=a.message?", exception -> "+a.message:"",GIAPI.logger.log("accessoptions error: "+r,"error")}})}catch(p){console.log(p)}}return!1},s.accessLink=function(e,r,a){var o=c();if(o.length>0){if(r){if(!a){var n=GIAPI.accessLink(u(),o[0].url,r,"gi-axe-transform",l.id);return e.apply(s,[n]),!0}if(1!=a||1===a){var n=GIAPI.accessLink(u(),o[a].url,r,"gi-axe-transform",l.id);return e.apply(s,[n]),!0}if(a===!0){for(var t=[],i=0;i<o.length;i++)t.push(GIAPI.accessLink(u(),o[i].url,r,"gi-axe-transform",l.id));return e.apply(s,[t]),!0}}else{var p=function(n,t){if(t)return GIAPI.logger.log("accessOptions in accessLink error: "+t,"error"),e.apply(s,[null,t]),void 0;if(!a){var i=n.defaultOptions,p=GIAPI.accessLink(u(),o[0].url,i,"gi-axe-transform",l.id);return e.apply(s,[p]),void 0}if(1!=a||1===a){var p=GIAPI.accessLink(u(),o[a].url,r,"gi-axe-transform",l.id);return e.apply(s,[p]),void 0}if(a===!0){for(var c=[],g=0;g<n.length;g++){var i=n[g].defaultOptions,p=GIAPI.accessLink(u(),o[g].url,i,"gi-axe-transform",l.id);c.push(p)}return e.apply(s,[c]),void 0}};s.accessOptions(p,a)}return!0}return!1},s.preview=function(e,r,i){if(!document.getElementById(e))throw"Canvas element not found";var p=c();if(p.length>0){var g=p[0],d=function(a,o){if(o)return GIAPI.logger.log("accessOptions in preview error: "+o,"error"),r.apply(s,["error",o]),void 0;var n=a.defaultOptions;n.rasterFormat="png";var t=GIAPI.access(u(),g,n,"gi-axe-transform",l.id),i=new Image;i.onload=function(){var a=document.getElementById(e);a.width=i.width,a.height=i.height;var o=a.getContext("2d");o.drawImage(i,0,0),r.apply(s,["success"])},i.onerror=function(){GIAPI.logger.log("image loading error"),r.apply(s,["error","Unable to load image, error occurred"])},i.onabort=function(){GIAPI.logger.log("image loading aborted"),r.apply(s,["error","Image loading aborted"])};try{i.src=t}catch(p){return GIAPI.logger.log("unable to load image: "+p.message,"error"),r.apply(s,["error","Unable to load image: "+p.message]),!0}};switch(i){case"extra small":i=a;break;case"small":i=o;break;case"large":i=t;break;case"medium":default:i=n}return s.accessOptions(d,i),!0}return!1},s.overview=function(e,r,i,p,c){var u=l.overview;if(u&&(0>r||r>u.length-1))throw Error("index out of bounds, must be >= 0 and <= "+(u.length-1));if(0===!jQuery("#"+e).length)throw Error("div not found");switch(p||(p="medium"),p){case"extra small":p=a;break;case"small":p=o;break;case"large":p=t;break;case"original":p=null;break;case"medium":default:p=n}if(u)overviewLink=u[r];else{if(!c)return!1;overviewLink="http://api.eurogeoss-broker.eu/docs/assets/img/no_overview_576.png"}var g=new Image;g.onload=function(){p&&(g.width>g.height?(g.height=g.height/g.width*p,g.width=p):g.height>g.width?(g.width=g.width/g.height*p,g.height=p):(g.width=p,g.height=p)),jQuery("#"+e).attr("width",g.width+"px"),jQuery("#"+e).attr("height",g.height+"px"),jQuery("#"+e).css("width",g.width+"px"),jQuery("#"+e).css("height",g.height+"px"),jQuery("#"+e).append(g),i.apply(s,["success"])},g.onerror=function(){if(c)try{g.src="http://api.eurogeoss-broker.eu/docs/assets/img/no_overview_576.png"}catch(e){GIAPI.logger.log("unable to load no preview image: "+e.message,"error"),i.apply(s,["error","Unable to load no preview image: "+e.message])}GIAPI.logger.log("image loading error"),i.apply(s,["error","Unable to load image, error occurred"]),g.onerror=null},g.onabort=function(){GIAPI.logger.log("image loading aborted"),i.apply(s,["error","Image loading aborted"])};try{g.src=overviewLink}catch(d){GIAPI.logger.log("unable to load image: "+d.message,"error"),i.apply(s,["error","Unable to load image: "+d.message])}return u},s.olWMS_Layer=function(e){var r=l.online,a=[];if(r)for(var o=0;o<r.length;o++){var n=r[o],t=n.protocol;if(t&&-1!=t.indexOf("urn:ogc:serviceType:WebMapService:")){var i=n.name,s=n.url,p={layers:i,transparent:"TRUE"};if(e&&e.params)for(key in e.params)p[key]=e.params[key];e&&e.options?a.push(new OpenLayers.Layer.WMS(i,s,p,e.options)):a.push(new OpenLayers.Layer.WMS(i,s,p))}}return a},s.has_olVector_Layer=function(){var e=l.online,r=[];if(e)for(var a=0;a<e.length;a++){var o=e[a],n=o.name,t=(o.url,o.protocol);t&&-1!=t.indexOf("urn:essi:serviceType:Trajectory")&&(n?r.push(n):r.push("Unknown Vector Name"))}return r},s.olVector_Layer=function(e){var r=l.online,a=[],o=!1;if(r)for(var n=0;n<r.length;n++){var t=r[n],i=t.name,p=(t.url,t.protocol);if(p&&-1!=p.indexOf("urn:essi:serviceType:Trajectory")){o=!0;var c=function(r){r.defaultOptions.rasterFormat="GML 3.1.1";var o=function(r,o){if(o)return alert(o+": "+JSON.stringify(r)),void 0;var n=new OpenLayers.Layer.Vector(i,{protocol:new OpenLayers.Protocol.Script({url:r,format:new OpenLayers.Format.GML,parseFeatures:function(e){return this.format.read(e.results)}}),strategies:[new OpenLayers.Strategy.Fixed]});a.push(n),e.apply(s,[a])};s.accessLink(o,r.defaultOptions)};s.accessOptions(c)}}o===!1&&e.apply(s,[[]])},s.simpleAccessLinks=function(){var e=[];if(l.online)for(var r=0;r<l.online.length;r++){var a=l.online[r];a.accessType&&"simple"===a.accessType&&a.url&&e.push(a.url)}return e},s.isSimplyAccessible=function(){return s.simpleAccessLinks().length>0},s.isAccessible=function(){return c().length>0},s.report=function(e){return e&&(l=e),l};var c=function(){var e=[],r={};if(l.online)for(var a=0;a<l.online.length;a++){var o=l.online[a];"GI-AXE"===o.protocol&&o.name&&!r[o.name]&&(r[o.name]=o.name,e.push(o))}return e},u=function(){return"string"==typeof p?p:p.endpoint()};return s};
GIAPI.DAB=function(e){var r,t,n={id:"ROOT",type:"composed",title:"DAB"},o=GIAPI.GINode(n,e);GIAPI.tfHelper={},GIAPI.tfHelper.checkedItems=null,o._paginator=function(t,n,l,a){var c=GIAPI.random(),i=f(n),p=GIAPI.query(e,n,l,null,null,i,c),I=arguments[4],g=I._resultSet.extension,d=l&&l.extension&&l.extension.relation&&(l.extension.keyword||l.extension.concepts);a&&(r=s(a,d,c)),jQuery.ajax({type:"GET",url:p,crossDomain:!0,dataType:"jsonp",success:function(e){for(var s=[],u=0;u<e.reports.length;u++){var c=e.reports[u];c.semantic&&delete c.semantic;var i=GIAPI.GINode(c,o);s.push(i)}I._resultSet=e.resultSet,I._page=GIAPI.Page(s,I.pageSize),e.termFrequency&&(I._resultSet.termFrequency=GIAPI.TermFrequency(o,t,n,l,a,e.termFrequency)),g&&(I._resultSet.extension=g),t.apply(o,[[I]]),r&&r.stop()},complete:function(e,t){GIAPI.logger.log("_paginator complete status: "+t),r&&r.stop()},error:function(e,r,n){u(r,n,t)}})},o.discover=function(t,n,l,y){var m=l&&l.extension?l.extension:null;if(m&&m.relation&&!m.keyword&&!m.concepts)throw"Unable to expand discover, only relation selected. Please select keyword or concepts";if(m&&!m.relation&&(m.keyword||m.concepts)){var v=m.keyword?"keyword selected":"concepts selected";throw"Unable to expand discover, only "+v+". Please select a relation"}d(n)?(l.start=1,arguments[2].start=1):GIAPI.tfHelper.checkedItems=null;var G=GIAPI.random(),P=i(n)||i(l),h=c(n)||c(l),A=f(n),S=l&&l.extension&&l.extension.relation&&(l.extension.keyword||l.extension.concepts);S&&l.termFrequency&&delete l.termFrequency;var x=GIAPI.query(e,P,h,null,null,A,G),w=arguments,_=p(n)||p(l)||p(y);_&&(r=s(_,S,G));var j=l&&l.timeout?l.timeout:0;jQuery.ajax({type:"GET",url:x,crossDomain:!0,dataType:"jsonp",timeout:j,success:function(e){if(e.resultSet&&e.resultSet.error){GIAPI.logger.log("discover error: "+e.resultSet.error,"error");var s=GIAPI.Paginator();return s._resultSet=e.resultSet,t.apply(o,[[s]]),void 0}var u=[];if(w[2]&&w[2].extension&&e.reports.length>0){for(var c={},i=0,p=0;p<e.reports.length;p++){var d=e.reports[p],f=I(d.semantic.matchKeyword),m=c[f];!m&&g(c,f)&&(m=[],c[f]=m,i++),m&&m.push(GIAPI.GINode(d,o))}for(var f in c){var v=c[f],G=v[0].report().semantic;delete v[0].report().semantic;var P=GIAPI.clone(w);P.length=w.length,P.callee=w.callee,P[P.length]=o;var h=f.split(",");if(1===h.length)P[1].what=f;else{for(var A="",S=0;S<h.length;S++)A+=h[S].trim(),S<h.length-1&&(A+=" OR ");P[1].what=A}P[1].subject=null,P[1].relation=null,P[2].extension=null;var x={};x.size=G.matchCount,x.pageSize=parseInt(e.resultSet.pageSize),x.start=1,x.pageCount=a(x.size,x.pageSize),x.pageIndex=parseInt(e.resultSet.pageIndex),x.extension={},x.extension.size=e.resultSet.size,x.extension.resultSetIndex=u.length+1,x.extension.label=f,x.extension.uri=G.term||"none",x.extension.scheme=G.scheme||"none",x.extension.language=G.label&&G.label.language?G.label.language:"none",x.extension.width=i;var s=GIAPI.Paginator(P);s._resultSet=x,s._page=GIAPI.Page(v,s.pageSize),u.push(s)}}else{var v=[];w[w.length]=o;for(var p=0;p<e.reports.length;p++){var d=e.reports[p];v.push(GIAPI.GINode(d,o))}var s=GIAPI.Paginator(w);s._resultSet=e.resultSet,e.termFrequency&&(s._resultSet.termFrequency=GIAPI.TermFrequency(o,t,n,l,y,e.termFrequency)),s._page=GIAPI.Page(v,s.pageSize),u=[s]}t.apply(o,[u]),r&&r.stop()},complete:function(e,t){GIAPI.logger.log("discover complete status: "+t),r&&r.stop()},error:function(e,r,n){u(r,n,t)}})},o.node=function(r,t){var n=GIAPI.query(e,null,null,null,r,null,null);jQuery.ajax({type:"GET",url:n,crossDomain:!0,dataType:"jsonp",success:function(e){if(e.resultSet&&e.resultSet.error)return GIAPI.logger.log("node error: "+e.resultSet.error,"error"),t.apply(o,[null,"Error occurred:"+e.resultSet.error]),void 0;var r=null;if(1===e.reports.length){var n=e.reports[0];r=GIAPI.GINode(n,o)}t.apply(o,[r])},complete:function(e,r){GIAPI.logger.log("node complete status: "+r)},error:function(e,r,n){r+=n.message?", exception -> "+n.message:"",GIAPI.logger.log("node error: "+r,"error"),t.apply(o,[null,"Error occurred: "+r])}})},o.sources=function(e){o.expand(function(r,n){var s=[];if(n.error)e.apply(o,[s,n.error]);else{var l=r.nodes();t=l.length,o._includedSources=[],l.sort(function(e,r){var t=e._title,n=r._title;return t.localeCompare(n)});for(var a=0;a<l.length;a++){var u=l[a],c=u.report(),i=GIAPI.DABSource(c,o);s.push(i),o._includedSources.push(c.id)}e.apply(o,[s])}},30)},o.concept=function(r,t,n){var s=GIAPI.concept(e,r,"",[],n);jQuery.ajax({type:"GET",url:s,crossDomain:!0,dataType:"jsonp",success:function(r){if(r.resultSet&&r.resultSet.error)return GIAPI.logger.log("extend concept error: "+r.resultSet.error,"error"),t.apply(o,[[],"Error occurred:"+r.resultSet.error]),void 0;for(var n=r.concept,s=[],l=0;l<n.length;l++){var a=n[l],u=GIAPI.Concept(e,a);s.push(u)}t.apply(o,[s])},complete:function(e,r){GIAPI.logger.log("concept complete status: "+r)},error:function(e,r,n){r+=n.message?", exception -> "+n.message:"",GIAPI.logger.log("concept error: "+r,"error"),t.apply(o,[[],"Error occurred: "+r])}})},o.endpoint=function(){return e};var s=function(e,r,t){var n=function(e,t,n){return function(){return e(t,r,n)}},o=jQuery.timer(n(l,e,t));return o.set({time:1e3,autostart:!0}),o},l=function(t,n,o){var s=GIAPI.status(e,n,o);jQuery.ajax({type:"GET",url:s,crossDomain:!0,dataType:"jsonp",success:function(e,n){for(var o,s=[],l=0;l<e.discoverStatus.length;l++){var n=e.discoverStatus[l],a=GIAPI.SourceStatus(n);"DAB"===a.title()&&(o=a),s.push(a)}t.apply(this,[s]),o&&100===o.progress()&&r.stop()},complete:function(){t.apply(this,[])},error:function(){t.apply(this,[]),r.stop()}})},a=function(e,r){var t=parseInt(e),n=parseInt(r);return parseInt(n>t?"1":Math.ceil(t/n))},u=function(e,t,n){e+=t.message?", exception -> "+t.message:"",GIAPI.logger.log("error occurred: "+e,"error"),r&&r.stop();var s=GIAPI.Paginator();s._resultSet=GIAPI.emptyResultSet(e),s._page=GIAPI.Page([]),n.apply(o,[[s]])},c=function(e){return e&&(e.start||e.pageSize||e.extension||e.termFrequency)?e:null},i=function(e){return e&&(e.where||e.when||e.what||e.who||e.keyword||e.format||e.protocol||e.sources)?e:null},p=function(e){return e&&"function"==typeof e?e:null},I=function(e){var r=e.indexOf("----")+4;return e.substring(r,e.length)},g=function(e,r){for(var t in e)if(t.toLowerCase()===r.toLowerCase())return!1;return!0},d=function(e){return e&&(e.format||e.keyword||e.source||e.protocol)},f=function(e){var r=t&&t===o._includedSources.length?null:o._includedSources;return e&&e.source&&(r=e.source),r};return o};
GIAPI.Page=function(n,t){if(n&&!Array.isArray(n))throw"nodes is not an array";var r=0;return{next:function(){return r===n.length?null:n[r++]},hasNext:function(){return r<n.length},nodes:function(){return n},size:function(){return t||"10"},count:function(){return n.length},reset:function(){r=0}}};
GIAPI.Paginator=function(){if(arguments&&arguments.length>0)var t=arguments[0][1],e=arguments[0][2],r=arguments[0][3],a=arguments[0][4];var n,s={};return s._id="paginator_"+GIAPI.random(),s.next=function(u,i){if(!s._resultSet)throw"Paginator not ready";var o=s._resultSet.size,g=s._resultSet.start,_=s._resultSet.pageSize,S=s._resultSet.pageCount,l=s._resultSet.pageIndex;return n||(n=g),o&&l!==S?i?(n+=_,e||(e={}),e.start=n,a._paginator(u,t,e,r,this),!0):!0:!1},s.prev=function(u,i){if(!s._resultSet)throw"Paginator not ready";var o=s._resultSet.size,g=(s._resultSet.start,s._resultSet.pageSize),_=s._resultSet.pageIndex;return o&&1!==_?i?(n-=g,e||(e={}),e.start=n,a._paginator(u,t,e,r,this),!0):!0:!1},s.first=function(u,i){if(!s._resultSet)throw"Paginator not ready";var o=s._resultSet.size,g=s._resultSet.pageIndex;return o&&1!==g?i?(n=1,e||(e={}),e.start=n,a._paginator(u,t,e,r,this),!0):!0:!1},s.last=function(u,i){if(!s._resultSet)throw"Paginator not ready";var o=s._resultSet.size,g=s._resultSet.pageCount,_=s._resultSet.pageIndex,S=s._resultSet.pageSize;return o&&_!==g?i?(n=(g-1)*S+1,e||(e={}),e.start=n,a._paginator(u,t,e,r,this),!0):!0:!1},s.skip=function(u,i,o){var g="function"!=typeof u?u:i;if(i=parseInt(g),!s._resultSet)throw"Paginator not ready";var _=s._resultSet.pageCount,S=s._resultSet.pageSize,l=s._resultSet.pageIndex;return i===l||1>i||i>_?!1:o?(n=(i-1)*S+1,e||(e={}),e.start=n,a._paginator(u,t,e,r,this),!0):!0},s.page=function(){return s._page},s.resultSet=function(){return s._resultSet},s};
GIAPI.SourceStatus=function(A){return{id:function(){return A.id},title:function(){return A.title},progress:function(){return parseInt(A.progress)},message:function(){return A.message},phase:function(g){if(!g)return A.phase;switch(A.phase){case"INIT":return this.INIT_DATA_URL;case"DISTRIBUTION":return this.DISTRIBUTION_DATA_URL;case"VALIDATION":return this.VALIDATION_DATA_URL;case"DECODING_REQUEST":return this.DECODING_REQUEST_DATA_URL;case"NETWORK_WAITING":return this.NETWORK_WAITING_DATA_URL;case"DECODING_RESPONSE":return this.DECODING_RESPONSE_DATA_URL;case"JOIN":return this.JOIN_DATA_URL;case"PROCESSING":return this.PROCESSING_DATA_URL;case"COMPLETED":return this.COMPLETED_DATA_URL;case"ERROR":return this.ERROR_DATA_URL;case"TIMEOUT":return this.TIMEOUT_DATA_URL}},INIT_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADKUlEQVQ4T21TW0gUURj+zszszM7OurvOupar5m4rrZZam21WFoViFBQ9BN2oMJIosBChQopKeunNhx6KiIQigi4PvkhFdyGDoqCLBLJpdHHV3JtuOe7OTGemFKEGPv5z+b/vnPPP9xP856s4UB0o9gXqJpi0j2MJES1ifCQSffrqfM9Lmq7PppDZk+rDdYFAme8sxzM7oWjgRQFE16FaNaiiDk7lXvz8nG69dfRq7zRvRqDh9NZl3kLPAyYNp9sjwyZLIBzd5mgqCyhZBUPDUVhcApQfmUPX9l64aIiYAsGm5f4loco3OWnBWRAoAHgClagYy8SRVJNIqCnEtDh+YRKZEQU1vjBG+5Ibu9tu3DUF1p7ZdLWAce8pDQbMEyem0ljpDWNZUQgsy+JjvB+XI9fQm6IlyABSworykoVfunZc95M5e4L+ed7CT7XF1bDl2RFNRNFYtRP5cj4YhoHFYjFhjFt7T+DZEH2+oiOf8YD9zm4jlUdW7RM14cr6mnWIxAYRkiuwoiQMQgisVitEUTSjgeHJUWzu2gE9q4NVGMgWz0VS09bQLmr8qQpfEB+H+7ElsAF5nGwSjZMlSYLD4TCjMd/bfRCR+AD0KcBpz+0h4eP17XaIp1xSDlKZcazODcPN5cJms8Fut5tEA4Ygz/NofnQMA8nPQBZUWO4hVS1rWtiE2iHn50KnBfSzRShzlM4QDaFpcjI7juanxwCNVn5Sx1zZe4nM2bVgvtvmisicA0Ri8G30G5oqdkO0/Hm/AUEQzHjhbSdej70FVJ2uichj8prM31jZsvqJ8im1Vi52o38kAqeYgw3z67HIEzSvHcsmcP/rE7yL9ZlG1tIq5gaLku9PPveYAt79i0OyVXqsDKacMS5JvUCoCw0H0m3qQmLEv57VMxpcXjf4jLC9r+PFzRkrLzq8olFX9M7RgSGoFg1EMMhUiKFCBgzbKoDL74FV59vedfSem7HydGOUHqhe6nI4O7kJVE39VPArOwmd0WCl9ZBcdmRy8GUinm7tO//89j/NNLsrQ0fW1JeXlDW4nXKtwPFkbDz24fuP6MN77Xfu0Dx1du5vpjUHBLzx3/8AAAAASUVORK5CYII=",DISTRIBUTION_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAACPElEQVQoU2NkwA44GTyLznKr+mh+vb3lOsP2PmOgsu/YlDJi1a9u0cHr2VX+9+8vBmZmNobP28s6GW6eqCDeAIeU83yGCQZ//vxgYGHhYPh0fsEFhgNzDIk3QMWwkd9vSt2fPz+BBrAzfNyU08Rw53w98QaAVGrZ9LLblRf9PNTZx3DtSDGOsGJADgNOBnZ2GaDC/ww/mX4w8HBaMPq3rv6/sTqU4cv3Ewzs/ziAcowMP38+QQ5QmAFiDEFNB1kEVDT+/fn1H2wbEzMDO5cI489vb/4z/PsLEWJhY/zz4c4NhnV19kDuK5AYxAA2Hi2mqGln/63O9QGL/f37m4GbT4/Ju3nSv621eQxfP10CRgcryHVMoZO3/FuWZczw68s1mAGiDFp2dex2ZZk/t1eWMTy83Ac2VMO2m92hrOTnga4ehhuHS8Fi8rpF7J7tXT8PdU1nuHaoCSjympHBo/gOj7qv8v///8Bx/mllQgoDG6cIf9CMDngsrMuoYPj1/Q1f+II5oLTByMjE8OXm5rsMO3pVGLnz9v0HaQYBcJyfmLCXgZmDn880wwSeDk7POMPw98dHPosCZ5AY2OlAQ75OcmJkZPCrvcUpa6PKCAw0JiYWhi9rMgsZOLn5eX36GuApcUtRA8P3rx95Qqb3//v3h+E/MFC/Pz5ym2FTsxojA4+AA4NT7ixuBUfVr1dX3WTYO8MEaMEvYF64gJQXDEBBzeCccYZbO0z964P9txn2TU5j+PLhAPa8AHYkcQAAFZXhD6YckjcAAAAASUVORK5CYII=",VALIDATION_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC7ElEQVQ4T3WTW0iTYRjHn+/TzePmZO7g3GDTqbPZSIiwwFJsmXgjhV1kB2WywC7ydBGTaCYkCFmYSexGM2jEiLTw0FLTmlB5SNfKabVWqJjbch72be5z3/oUFU194b15eP6/9/nz/F8E9j8ihUIRK5PJWDqd7qfBYDCRra7/25G99BUVFZVKpbJSJBIRXq/X7na7AzUaTZ9KpSoh++3bNbsAWq02Jzs7R+f3Ew4URbCgoCDwA1BmZ/9w6+ruaO/X1xeTgJVNyC6AxWLpCg+nSX0+AgsOpgLuI5huzB2J4zhqNI5h6pu3Mo3Gkff7Avr6+mcEAsEShUIJRQMCWCgaEEQQPsDxVXC5lqG69t7nJFHScbW61LkG2TWBXv+6jcvlpgVSqJF0Og1QBAUvjoNnxQO/rFYwmi3g8nhGgUJkqEtLnTsA11U3CpaXFu9eyD/PoNHpsOYfQRDAMAzIiaCzSw9H09LBPDEBjY2NbR/f9eRuAcqrbjd75x2Xi4uvQsfLVhCL4+CkXL5udcHphNa2l5AolUFyshQmJyahqqYGTsizyzYBCJvNbr5YeOUSmxECkgNSWFhcBBaLDaQVWCX8wOXx1yeiUqkwNDgI7R2dlt7erjPbLfAThOyhaGYEJ16aAlMOD6yQvosURSDPOg0+ggC73QFfx8fhQUN9y9sevYocbmYLIOaFprCYUSMxvGg4nJkHNvtfmJ6eAgGLgLyMYHj8JgRGTd9s9jmbatw4/IQUY1tbEDKAERYR8UmSKBF+GB57deqsIosXzQIpxwpCLgqmuXgYMzu7mx5pyl3z819IoW9HDiQxYU0JEmmBY/pHy4DZUcHhcBqulZWcOygi4PscAzP0G6qf6bQPSdH67ndEOYEXmhvDFzynUf2WF4bJtDVf5GUfST02kF+odNfWqJXTVuswWcP3+jfIIXHUfFyskDphHs81/XZ1k01k9NcDxt/IvG2jtpcekNRkYTqTivHbR+ae7vfKnsqN4j/7KSLQfZStLgAAAABJRU5ErkJggg==",DECODING_REQUEST_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADU0lEQVQ4T22TWUxTaRTH/1/pxZaW1lhaKAWxVqTCWJUiIHGZ+OCSkWjc4hKNOiSExAeXmJi4jGZi4gtGo4k+gBHimBlEfZghmnGJ0QdFlGiMKIyOUlahLN3uvvj1jhIS5yYnN/fec373/P/nOwT/cwWXH/JNzw+slSXVoRGFMEaDNNj3T8uTv0610XRtcgmZ/FCx+qivqHjpr6mmtK2aEkEKEaEqCaiwQuDHkvdQZPRz1a26vXe/1U0ANlQ3luT55t3T1LDdleGC2TIVmiJCYkdAGBM4NoreUAeMTBp4Tqq5XLv7UhKiA4I/HswoX7H9vYWJ2nO8cwFVgiSK8Nr6URbMQ921p3jWBbDxGPh4P4r8LgwMRze3XNl3XQds2veoMdtt3pGfXwBVlTEUZvF5OI4ti1kEfsgFy7I4feEB2t7KUGQWROnDLJ+vp+lStZd4/DsdZatqwiWBDKTbsxDqZxGJ0ojEkBh6i7NHS8EwBnAch9qLD/G8U4AisbBaxqlEy8+kYl3thuyZZc3Ll5VgoG8ABnEQiQSH8EgcCvXAbYth+8YkhFAIj/P1j9DexVOJ3bBZ3VdJZc2dk85M/3G/PwuFtnYEF3ihaRoIIVSOCkmSIAgiDR48L9DgcaL2PgZHOJhMpsfkp+o7J7Ny5hx3OF2o8LRhbmEOLf7P3yRAlmUdIorJYgFjo1GcqXtKATymmFIfk2Ubz25y5JY3efICUOL/IjHWQ42i86dmaqoIp3kcO7eUUoCoR/3vL/DqvUjldMFhn3GNzF64f2ZB+a4PTpcFTOo0dHfHKCChu53Cv8PhPbkwmY20CxmX/3iJ1x+hmyiJIUy1ZVXpza6uuv9byhRmW6anCH291LyvgDWBDhTPz9OlNDR34E0oVQez0U46sczIUO+gVwcku/CX726HxtoF1Q31K2Ce8wUqV85G481OdPSm0/csuFgPnYgGo8FY9fzvX+onjvKSdWdKbZ6ld0eHO23mdD9dGQ0SNwp+vBtGawYUMQ4+8YE6n0a/kYZnLYd2TRzlb4sRrLxQ7M4uOGdkhMWKIoMTwrR9ESmKQv8KSHxaT3Ss/0Dr7WPN3y3T5K1ctOZIaWFg4fpMh32+gcAaiYy0fvoUav2z4cANmqdMzv0C2tGZc8nM+tEAAAAASUVORK5CYII=",NETWORK_WAITING_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAACMUlEQVQ4T62TS2gTURSG/5kkk2RaCUkfxle1rRpcxNrUVUHBRYoUuqqbikXBRQhJC4IogkIFxY0ItonRUsSFKEgw1AdCKyJIfay0Dx/VvKTJpBgnsTFpMpnMxLFilEljNt7Vvedyv/vzcQ4B2bLb7QMkSfbI6/KzKIr3PR7PCCG/cDgcEy6Xy1oN4HQ6J91ud1dFgNE6BEKhKuMoaQMW7tpRFbC++wKUdGMZgK5V48ONQ/8RsIo0i8lkqnvyJgwoqFIChtMhlmlAWYJq0pjkMr7lebz7/AmpbA5+hsRBSz2ujgz/kvgbIJdGSHr3d+3AmaNWEEIei3E/WJ5GRNiM2dfvwUyMBn23rreWAHJpbWY9Bg4U8YWdAa22gKIaEY5HEMl2IMlp4H/2Ev6H5/srAo70taNzewDTwTvQUM1AQYf5UAzh7GFo6Rok56X91EVvRcDxwR7oVD7Mvh1HQVBAS2gR5feAFbshxFkkAimwfl+sBGjqHcMaPV2yvq9zNyBeQTTyCDRlQOE7BcF4GlBvQ2KGgZgnpFrwD0DeMcMPQnj8MYRM9CSUMKBGdwoc34J0QpAScWjbWYuvwRde4u8+MJvNepvNJn0NvJoO4MQ1AkVyCXzOC7WqHdk0CZFYwKbmjWjasgupOV//yiys1gtFqX773hwujWpQFBoA/VOQCgdyywzqDYPYatx7duxc79AK4F8jvMTXrQtGOwoZjlpbUB9DejExtcHQN/588vLNn29/AOPlFct62uwRAAAAAElFTkSuQmCC",JOIN_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAOCAYAAAAmL5yKAAAB/0lEQVQoU6WTS2jUUBSGv3QycdpJE4Xqyo2PqvVFtV2ICxVFtOiiCONrUQQf4EawvgpCrV3VVwU3gg+QLlQcEBdKFVHQhbhotfiqtlU3rqQLEzPtNJNpPMk041AqFEzu5ZI/53z33D8nCv95KWG+zobKbVxTF1LtvuFLppt6UV29kb74MmpyH+l3HlArmpZsoEdbzWJviMHfjzgUAip3MaDOo5oyUGT+6uJoWQLT2E2b74mmgn2XtvEs1swmLvvjkiTT+85gCJh1Gl/u8FLiMPKcZ5Jklq+j3s8VtNGX9AjMqtjIpkArBIdDTtDIkLacBb5Agt2smxxQNKqMJjoigN1Fi+8ybO7nRliVZLof+FrwAGbHV9Ca3MJh5z4nvW90BqJALyS3cjzzmIsSfCLQ1Pk06zs4n3nC1dx72iOARLPUOEivfYvtYXF5ciRZaaa4YqU5QoZ3xJDD4Bv7eGhfpw6XT38BMEffw4tYFUuk7IIjMRk6St6R53zRIyU/zGfnDutF+VkKCCLKmcHcYBfGyGKyxthJ2r5HCovX8i4RVjfGD1lHJ3yccGGKRXrgkt5As9NNp/TCsakiJ1dQjFEXcdbYS2vxK9ym3RvgzGTIPwEVm3mbWEttBMi+om/kKaumDdBq6NBTnIo60Ulzzu2nZdqAwFBpsN6Sf6EuMq4U8gdpTqhx8Av8wQAAAABJRU5ErkJggg==",PROCESSING_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADbklEQVQ4T21TbUxTZxR+Lr2FKm2xDYod1ZasgKSzkbSCia1KouimkogLP9YRNkt0kGVKf2hYBAZ+BJVoJEqi/vAjmYSJLiSDfUAQBomDLBCNRWpFxUxp7d0ovY29LZTutFmNyXyTm/ve957nOed53nMYvGfV1v5g37hxfb1czi56PK/H2toazt69+1PP+2KZxGFVVVsux02EZ2c9kcLC8l+i0Wie0ZgHiyUbjY1nxnp6uk6ZTDu4gYHWUa/XG0jg4gSdnfcrCgq0bYKwgImJmajb/SZVJAI2bMjBqlVpePTIjf7++xCJotFgkBtpbq6pCIW4xzFsnODo0RtnGSa1RqfLQnFxPiKRCORyEcLhMPx+AQzDElgMlmXx4oUPNlvZBYejz07Q+ThBSck3O3JzN/0sFotgtW5FTo4UTqcXHk8SJJJkcJwbwSAPnU5PlQzM19eXHRcE/ymChuIEjY3dJ1UqVa0ghFFaakAoFKRMKZQ1CT6fF3q9mmS4MD3NU/TC4pEju6sDAe5SXEJHx/iVrKwPrRw3u4Q0wmxWY2zMB0FgUVdXMcLzkozy8s+1NtvHuHlzGEqlCr29t8dHRn695nQOXmd4PmYM4Hb7oVbLkZQUgsvFYGioj7fbd1Zt315Tkp1tKGtq+gy3bv1BkpZDpcrEvXvDaGr6dC9z+vSNTqNx897k5BRotQoyD1SuQBKeBVtaGs5ZLFbr6tVKzb59Zly9Ooxly9SYm/sH1BfBrq4z1TEPluzZY281Gj+pzMxUkgfr8ODBc6Snq8lED3ngJ1kaPHnyEoODfyEtLY08q/htZsbRTtihuIknTvy4n8q8FAgEsGaNDgpFiACvYDBoqSIWDsdz9PU5ycx1pP+O//LlmoMEuxY3ccuW79jKyvJuvf6DYp9vjo6kWLEilTJz5MUz8Pwb6guW5MXI5HSNvaGWlgM2QeC+TzQSYzZ/fUEmy6o2mT7Crl3bMDU1RW4rIJWm0pWGsbAQpYpcWLpUiocP/8TFi4e+FYS/m4kgmpgFZUaG4SvSbdFqNcuVymyDTKYQFxUVYeVKFc6fb3g5Oto/KZFIJW73pMvvf9VK4PG3rfzOlMloL1+7tvhLjcZ0MD/flE4Lx4590c5xTw/TPyHWSfT4Epi30/gOyX9bcQENVB59pEQi85P0/v3/McC/d5diHn407noAAAAASUVORK5CYII=",DECODING_RESPONSE_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADWklEQVQ4T2WTbWyTVRTH//e5z3vf17mx1naZTrYSAWHgjHG+BFBxhAScGoHwsim6hERjIiEhRKiBL76giUZNigEXMZpoRCSAH9xCYAkUNvYCjBYZ26qrbZG2G23XPuvj3YNriNzc8+XmnF/u+f/PIbj30NZPn3vR66lttJdbG3W9OBlPxS/2n+3/6de958/9P53c/bBy34KWsjm2j6Ws7CkgD0o1UJGDVK6C8hTTYv702FDsraPb+ntm60qA5g8XHCTQN+VuZ2GplSCYKSYTGhzVEtQyAYRlpoamUFHnTI91pVf8/M6d3xiAZ99/uG26oAU0MgWrV4agcnBPNGDt3C34LXwEiYZu441nQaJmcKZi6nQgtDi4f/Q6md9uc7irvMPJv5M2e73CEim8+SVo8bWC4zj0jfZiYN7h/wAUbnMN/rwcRV6bPvzl053rSfOeRW3J6K2AXM1DMHF4AI/ilYWvQ+AF5LQcDkR2Q63PlQBey0PI/6MhlhnHma/DD5KV/ke+vXUjsc5cJ6NWbMSrDVshiqIR3wcPImOPMiEJOJ61IFI4PCosNQQjAxHc6E68TJa95zuVy2ebnLIHbzy2Aw6rA7IkQ5RECIIAnueNVqDPXB1XIoMYX9qJWCyOsaFxP1m+x3cqm2UAxYN3l+2DLMsGQJIlSCJzg0FmALquMycILg73IL24D6EoA12N+ckL/oUd6Whqw4wGdcrjaGt6G4qsoKAX8GOwAylLxPi601wBk2KCVDkNd5ULXRdO4tq5SAtp9i9q5TL0QMaeNESsl5rQ/tR2KAqDFAvYG2xHpU+BzeyAVbXDpdYgGZ3AwM1uHPu8r3xmDmh7YM1wOBzy8PcXDBt9/JPY9sxOqKqKS2MDOKMewn3mKjjVSkPMcCiEvzIjHfubjm40BmnzJ8+/VGF3/XAl1guLS4bZYsJcPIF1jVvRM3IWadc15grTQgCuD0agWSdSJzo6a7s+CiVKo7z9m81vSrz8RSGjoXqeB6qFtTClw1TGXGA23k5mEY/HwJcXU6HekeVfbfzlfGmUZxfjtc9Wr3BW2QKYpF7ZIQGTzHumS1HUwNuAqWz+u2B3/67juy78cc8y3bWVZNXOJUvddZXNWrEgEEp0SunNcO/okd8/GCwVzub/C1MgLl8VCbqbAAAAAElFTkSuQmCC",COMPLETED_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB4ElEQVQ4T2NkoBAwkqo/aJucNcPffxt/vPsvvC3+qQhJBoA0MzMzbHx3+7fwj7d/jh+tfx1MtAEwzb++/hd+e/n7ye93OU6cXfSkligDYJrFFEWF7x1/wfBqL+PEF3v/T3v69OlDggbANCupKQlfPnSb4efnP8deHfk3+/KK12uB4fcZxQCY4r9/GfzXeT06CuObatkKHz11kOHTw99X35z61wPV/AtowE+4ATDFaWZNwrNO1b0FGQIKMJDmK6+PMry+8pvh1032vr2t99qAGr+ANINiEGwAsmZYtIIMAWm+9/0iw6Pj78FO35vzMgQo/w6qBmFA6E65NyCbQRJvfj+BJ41v/z4xbDi4lOHvDwaGPzd4Qne139yPbDvcBSADGP8xcGhp6XNzMfHBDTh96wjDixPfnrHzMd3fk/syFKr5M3LiA3tBWlpazaCUvYFb/Y/fz2//mUV0OTj+fP/H8O72T4bvT3/fP1L+0fHHjx8gp4MDDsMAoAA70BB5HuPv+nJaIuY8Vj+KWXmAIfXkL8PvB2ypu+vur0d3OswQ5GjkhbpGUiuWO+2nwIdiIQ22zxsCnqhjczo2A0Bi7EDMBnSNJNDJAn/+/Hn78eNHUKiiOBubF5DFYGyQi1ACDJsiAIU/4VHlwvAFAAAAAElFTkSuQmCC",ERROR_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADZUlEQVQ4T22TbUhbVxjH/+fm3tyb5N6YBtNkGndJfWmrcVqT6dBWtNUycBXW+qGoUJlQV6lbKaPr29Yvc1/GEPdhFMEKgzIo3Sxbi3RtSt0yRTojWGkjTZWqGSFMrY2makzcY7a+bgcOB855zu95/s8Lw/+tt6u2VCva3ZZgUGVIIGGxzX8fjf0E3+3A6+bslQv6+GEk1OlYXHhPkUTYbDaIjCEaCmFpeQWzkvzbNZ3u2K3RYd+zf88BxWXV7r2T92+aHGrK9uZm2F0uGI1GcByH1dVVRHw+BM6fh+J/8KTPuPnYN+O+ng3IPwDX7sxPg+PDqZXlKaVHj8JisYCLxcDCYfAE4O128LKMlbk5DNXXQ5j5E99mZLt/8XmHk4DG7Nx+1WIqLz93DmazGes3bmC9rw+a+XlwwSAEgsmHD0N34gTW6G6wqgohSbnb9tBfwDa8t4YDgeKPP0J6QQHY4CAyamuh1WoxU1cHSaPBm1euYPnpU8QuXIDx5EmEL17E6Gefozm/tIRV7txzvCw8/XXO2bOQKRqJHje3t0NRFMQXFiDpdFAomUskJ1xUBCs5SBDc43RiyPXOF2xXlrO9xGY6vfXQIUiPH0Pu7sYaaTafOgW9Xg8dAbjlZcw2NYH3+2Hu7YWQl4frOTkIO3f8TIDc9qK01NOO/fshkj5DZyc4kwmLbW2QrdYkhF9ZgXjmDNjEBFIoQpEAnsJCzDsL+1lFWdUn7tDkV7YjR8CiUShdXQg1NiIhSbBSGUWCbawNeWJLC1IuXQJHFblTXY0Rp/tLhpK9rqaHI3/kNdQjkZYG/egoZkmCjjyn9vRAVFVEDh6EngBGrxcySYl4PPB3dOC74oq6ZBlrs3K9qsjKHNRAa0tLkAYGwNEWKIkaeufT0yGUlsLQ0AA+HsdgayuikmGq49GEIwnYWlzhdk/eu/PGW/mw79uHOBnxJIefnobA89Bu2waRmotPJDBG1UrMzqE/y3ngV9/vPz5v5Z3OHR+oUxPdkkGP7JoayJQkDfWAIAjJHaHyBS5fhrgaw9j2/JZrQ96uF63872Rs2fXunsLpB92GUFDVUumMmZkAnYvUjZIoYtFmnxo3W48PjAz88J9hemkqmVpe8372XzOVmxjLZxT2k3U2NpmecXvcc7WX7OIvT/Df1VMsmVTz7HQAAAAASUVORK5CYII=",TIMEOUT_DATA_URL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAC2ElEQVQ4T11TTSisYRR+Xn8zTMICJaWoSZLBKErC2DALZWjEVdYspCykLKynGcrGQrJANIpm5GM1otQ0o+YzfjaIQoZYjMQdjO++59xG133rq9P3vuc853nOcwT+OYqi6D4/Py1fX1/K1dUVzs7OoGkaSkpK+JOxVafT+axWayyRJhKBz+czPTw8qDs7Ozg5OUF6ejpfxeNxpKWlIRqNIj8/H52dncjNza1sbW09pHsusL29bbq8vFRnZ2dRWFiI3t5e1NTUcCwRcX19jWAwiNXVVVBn3d3dMJlMlRaL5VBQ24+Pj79dLhfa29vR39+faBeSCoQQSEpK4m4kCObm5iBzMDY2hqqqKr1YX19v29jYUJ6fnzE1NYWCggJ+TNzpvL29Qa/Xc6Hk5GTc3t5iaGgIOTk5aG5utoqVlRXN4XBgdHQUdrv9G5USqAM61MHr6ytrkZKSgrW1NUxOTnIhMTExofn9fiwuLiI7O5uR6dH/J0GHCt/c3KCnpwc2mw1icHBQOz8/x9bWFicTGj06Pj7G7u4uqqurUVpaiszMTKZAhT4+Plgv+i+Gh4e1QCCA/f19vL+/MzoV2dzcxPLyMurr60H6FBcXo6WlhbkTUFNTE+rq6iCmp6c1t9vNI8rLy2N0+o6OjnB/f4+KigqEQiEYDAaOMzIymEJfXx+6urogPB4PizgyMoKOjg42DiGoqgo5XkjD/JCDutzb24PUjnOERG5bWlpSqHWn04mioiJOIA2enp7Q2NiIl5cXpkXod3d3kLpxLAGt30aamZmhubKRjEYjSNhIJILa2lqkpqZy0dPTUywsLLCRxsfH/xqJLmgPwuGwOj8/j7KyMva72WxmwbKystiB8p51Im0GBgZQXl5e2dDQcPhjmWTLqtfrxcXFBSMSMo0uFovx+Ige6STdysnfy5RQSa6vTopnkY5TaIGIL3GnLZRr/kuO3H1wcGCQixZN5PwBnSVjy2IX6jwAAAAASUVORK5CYII="}};
GIAPI.DABSource=function(e,r){var u=GIAPI.GINode(e,r),o=!0;return u.include=function(u){return void 0!==u&&null!==u&&(u?(Array.prototype.remove(r._includedSources,e.id),r._includedSources.push(e.id)):u||Array.prototype.remove(r._includedSources,e.id),o=u),o||!r._includedSources.length},u};
GIAPI.SpatialRelation={CONTAINS:"contains",OVERLAPS:"overlaps",DISJOINT:"disjoint"};
GIAPI.TermFrequency=function(e,t,r,c,n,I){var f={},s=[];GIAPI.tfHelper.checkedItems||(GIAPI.tfHelper.checkedItems={});for(p in I)s.push(p);return f.checkItems=function(e,t){var r=f.items(e),c=GIAPI.tfHelper.checkedItems[e],n=!1;if(c&&t.length<c.length){for(var I=0;I<c.length;I++)for(var s=0;s<t.length;s++){var h=c[I],l=t[s];h.term===l.term&&(h.veryfied=!0)}for(var u=[],I=0;I<c.length;I++)if(c[I].veryfied){var i=c[I];delete i.veryfied,u.push(i)}GIAPI.tfHelper.checkedItems[e]=u}else for(var I=0;I<r.length&&!n;I++)for(var s=0;s<t.length;s++){var i=r[I],l=t[s];i.term!==l.term||f.isCheckedItem(e,i)||(GIAPI.tfHelper.checkedItems[e]||(GIAPI.tfHelper.checkedItems[e]=[]),GIAPI.tfHelper.checkedItems[e].push(i),n=!0)}},f.discover=function(){for(var I=0;I<f.targets().length;I++){var s=f.targets()[I];delete r[s];var h=GIAPI.tfHelper.checkedItems[s];if(h){for(var l=[],u=0;u<h.length;u++){var i=h[u].sourceId?h[u].sourceId:h[u].term;l.push(i)}r[s]=l}}r.tfDiscover=!0,e.discover(t,r,c,n)},f.clearCheckedItems=function(e){GIAPI.tfHelper.checkedItems[e]=null},f.checkedItems=function(e){return GIAPI.tfHelper.checkedItems[e]},f.isCheckedItem=function(e,t){var r=GIAPI.tfHelper.checkedItems[e];if(r)for(var c=0;c<r.length;c++)if(r[c].term===t.term)return!0;return!1},f.targets=function(){return s},f.targetsCount=function(){return s.length},f.items=function(e){return I[e]},f.itemsCount=function(e){return I[e].length},f};
GIAPI.Concept=function(){var e={},r=arguments[0];e._report=arguments[1],e.extend=function(n,a,l){var p=t(a)||t(l),c=o(a)||o(l),u=GIAPI.concept(r,"",e._report.uri,p,c);jQuery.ajax({type:"GET",url:u,crossDomain:!0,dataType:"jsonp",success:function(t){if(t.resultSet&&t.resultSet.error)return GIAPI.logger.log("extend concept error: "+t.resultSet.error,"error"),n.apply(e,[[],"Error occurred:"+t.resultSet.error]),void 0;GIAPI.logger.log("extend success");for(var o=t.concept,a=[],l=0;l<o.length;l++){var p=o[l],c=GIAPI.Concept(r,p);a.push(c)}n.apply(e,[a])},complete:function(e,r){GIAPI.logger.log("extend concept complete status: "+r)},error:function(r,t,o){t+=o.message?", exception -> "+o.message:"",GIAPI.logger.log("extend concept error: "+t,"error"),n.apply(e,[[],"Error occurred:"+t])}})},e.property=function(t,o){var n=GIAPI.concept(r,"",e._report.uri,[o],null);jQuery.ajax({type:"GET",url:n,crossDomain:!0,dataType:"jsonp",success:function(r){if(r.resultSet&&r.resultSet.error)return GIAPI.logger.log("concept property error: "+r.resultSet.error,"error"),t.apply(e,[null,"Error occurred:"+r.resultSet.error]),void 0;GIAPI.logger.log("concept property success");var n=r.properties&&r.properties.values?r.properties.values:null,a=null;n&&(a={name:o,values:n}),t.apply(e,[a])},complete:function(e,r){GIAPI.logger.log("concept property complete status: "+r)},error:function(r,o,n){o+=n.message?", exception -> "+n.message:"",GIAPI.logger.log("concept property error: "+o,"error"),t.apply(e,[[],"Error occurred:"+o])}})},e.uri=function(){return e._report.uri},e.label=function(){return e._report.label},e.extensionSize=function(r){return e.maxExtensionSize(r)},e.maxExtensionSize=function(r){r||(r="all");var t=0;return(r.value===GIAPI.Relation.BROAD_MATCH.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_broadMatch?e._report.relatedConcepts_broadMatch:"0")),(r.value===GIAPI.Relation.BROADER.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_broader?e._report.relatedConcepts_broader:"0")),(r.value===GIAPI.Relation.CLOSE_MATCH.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_closeMatch?e._report.relatedConcepts_closeMatch:"0")),(r.value===GIAPI.Relation.EXACT_MATCH.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_exactMatch?e._report.relatedConcepts_exactMatch:"0")),(r.value===GIAPI.Relation.NARROW_MATCH.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_narrowMatch?e._report.relatedConcepts_narrowMatch:"0")),(r.value===GIAPI.Relation.NARROWER.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_narrower?e._report.relatedConcepts_narrower:"0")),(r.value===GIAPI.Relation.NONE.value||"all"===r)&&(t+=0),(r.value===GIAPI.Relation.RELATED.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_related?e._report.relatedConcepts_related:"0")),(r.value===GIAPI.Relation.RELATED_MATCH.value||"all"===r)&&(t+=parseInt(e._report.relatedConcepts_relatedMatch?e._report.relatedConcepts_relatedMatch:"0")),t},e.description=function(){return e._report.description},e.sourceThesaurus=function(){return e._report.sourceThesaurus},e.rootRelation=function(){return e._report.rootRelation},e.stringify=function(){return JSON.stringify(e._report,null,4)};var t=function(e){return e&&Array.isArray(e)?e:null},o=function(e){return e&&(e.start||e.count)?e:null};return e};
GIAPI.Relation={NONE:{name:"None",value:"none"},NARROWER:{name:"Narrower",value:"skos%3Anarrower"},BROADER:{name:"Broader",value:"skos%3Abroader"},NARROW_MATCH:{name:"Narrow match",value:"skos%3AnarrowMatch"},BROAD_MATCH:{name:"Broad match",value:"skos%3AbroadMatch"},CLOSE_MATCH:{name:"Close match",value:"skos%3AcloseMatch"},RELATED:{name:"Related",value:"skos%3Arelated"},RELATED_MATCH:{name:"Related match",value:"skos%3ArelatedMatch"},EXACT_MATCH:{name:"Exact match",value:"skos%3AexactMatch"},decode:function(e){switch(e){case this.NONE.value:return this.NONE;case this.NARROWER.value:return this.NARROWER;case this.BROADER.value:return this.BROADER;case this.NARROW_MATCH.value:return this.NARROW_MATCH;case this.BROAD_MATCH.value:return this.BROAD_MATCH;case this.CLOSE_MATCH.value:return this.CLOSE_MATCH;case this.RELATED.value:return this.RELATED;case this.RELATED_MATCH.value:return this.RELATED_MATCH;case this.EXACT_MATCH.value:return this.EXACT_MATCH}throw"Unable to decode "+e}};
GIAPI.PropertyName={SCOPE_NOTE:"skos%3AscopeNote",NOTE:"skos%3Anote",NOTATION:"skos%3Anotation",ALT_LABEL:"skos%3AaltLabel",CHANGE_NOTE:"skos%3AchangeNote",HIDDEN_LABEL:"skos%3AhiddenLabel",HISTORY_NOTE:"skos%3AhistoryNote",EDITORIAL_NOTE:"skos%3AeditorialNote",EXAMPLE:"skos%3Aexample"};
GIAPI.GINodeTree=function(e,o,t){var r=t&&t.onLoadComplete,n=t&&t.onCreateNode?t.onCreateNode:function(e,o,t,r){var n=e.report().title;return t&&(n="Click to get more results..."),n},a=t&&t.pageSize?t.pageSize:10,d=function(e){var o=function(o,a){for(var d,p=o.nodes(),l=[],u=0;p&&u<p.length;u++){var v=p[u],f=v.report().type,g=n(v,e,!1,!1),N=new YAHOO.widget.HTMLNode(g,e,!1,!0);if(N.data=v,N.isLeaf="simple"===f,l.push(N),u===p.length-1&&v._parent&&v._parent.expandNext()){var g=n(v,e,!0,!1);d=new YAHOO.widget.HTMLNode(g,e,!1,!0),d.data=v._parent,d.isLeaf=!1,d._expandNext=!0}i.nodeToRemove&&(i.tree.removeNode(i.nodeToRemove,!0),i.nodeToRemove=null)}a.error&&t&&t.onError.apply(this,[e,a.error]),e.loadComplete(),r&&r.apply(this,[o,l,d])};e._expandNext?(e.data.expandNext(o,!0),i.nodeToRemove=e):e.data.expand(o,a)};t&&t.onError||(onError=function(e,o){e.label=e.label+" ("+o+")",i.tree.draw()});var i={};i.tree=new YAHOO.widget.TreeView(o),i.tree.setDynamicLoad(d);var p=n(e,i.tree.getRoot(),!1,!0);return i.treeRoot=new YAHOO.widget.HTMLNode(p,i.tree.getRoot(),!1,!0),i.treeRoot.data=e,i.tree.draw(),i.onLoadComplete=function(e){return r=e},i.onCreateNode=function(e){return e&&(n=e),n},i.pageSize=function(e){return a=e},i};
GIAPI.ConceptTree=function(e,t,r){var o=r&&r.keyword,n=r&&r.onLoadComplete,a=r&&r.onCreateNode?r.onCreateNode:function(e,t,r){var o=null;return o=r?e.report().title:e.uri()},i=function(e){var t=function(t,r){for(var o=[],i=0;i<t.length;i++){var d=t[i],l=(d.uri(),a(d,e,!1)),u=new YAHOO.widget.HTMLNode(l,e,!1,!0);u.data=d,u.isLeaf=!1,o.push(u)}r&&onError.apply(this,[e,r]),e.loadComplete(),n&&n.apply(this,[o])},r=e.data;r.extend?e.relation?r.extend(t,e.relation):r.extend(t):r.concept(o,t)};onError=r&&r.onError?r.onError:function(e,t){e.label=e.label+" ("+t+")",d.tree.draw()};var d={};d.tree=new YAHOO.widget.TreeView(t),d.tree.setDynamicLoad(i);var l=a(e,d.tree.getRoot(),!0);return d.treeRoot=new YAHOO.widget.HTMLNode(l,d.tree.getRoot(),!1,!0),d.treeRoot.data=e,d.tree.draw(),d.conceptKeyword=function(e){return e&&(o=e),o},d.onCreateNode=function(e){return e&&(a=e),a},d.onLoadComplete=function(e){return n=e},d.relationExtension=function(e,t){return t&&(e.relation=t),e.relation},d};
GIAPI.TermFrequencyWidget=function(e,t,r,i){var l={},n={};return l.init=function(){for(var l=0;l<e.length;l++){var d=t.targets()[l];n[e[l]]=d}for(var l=0;l<e.length;l++){var c=e[l],d=t.targets()[l];jQuery("#"+c).jtable({title:d.toUpperCase(),selecting:!0,multiselect:!0,selectingCheckboxes:!0,selectOnRowClick:!1,fields:{term:{visibility:"hidden"},decodedTerm:{title:"",width:"80%"},freq:{title:"",width:"20%"}},selectionChanged:function(){{var e=jQuery("#"+this.id).jtable("selectedRows");this.id}if(e.length>0){if(e[e.length-1].ignoreEvent)return delete e[e.length-1].ignoreEvent,void 0;var l=[];e.each(function(){var e=jQuery(this).data("record");l.push(e)}),t.checkItems(n[this.id],l),r&&r.apply(this,[]),t.discover(),i&&i.apply(this,[])}else{var d=n[this.id];t.clearCheckedItems(d),r&&r.apply(this,[]),t.discover(),i&&i.apply(this,[])}},rowInserted:function(e,r){t.isCheckedItem(n[e.target.id],r.record)&&(r.row[0].ignoreEvent=!0,jQuery("#"+c).jtable("selectRows",r.row))}}),jQuery(".jtable thead").remove();var s=t.checkedItems(d);if(s)for(var a=0;a<s.length;a++)jQuery("#"+c).jtable("addRecord",{record:s[a],clientOnly:!0});for(var s=t.items(d),a=0;a<s.length;a++)t.isCheckedItem(d,s[a])||jQuery("#"+c).jtable("addRecord",{record:s[a],clientOnly:!0})}},l};